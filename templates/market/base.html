{% load static %}
{% load menu_tags %}

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'market/store/css/base_style.css' %}">
    <link rel="stylesheet" href="{% static 'market/store/css/left-nav-styles.css' %}">
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sidebars/">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="icon" href="{% static 'market/store/img/icons/home_page.png' %}">
    {% block link %}
    
    {% endblock %}
    <script src="{% static 'market/store/js/base_js.js' %}"></script>
  </head>
  <body style="background: #2b343c;">
    <div class="content">

      <header>
        
      <a href="{% url 'home' %}" class="logo">
        <img src="{% static 'market/store/img/icons/logo.png' %}" style="background: #2b343c;" alt="" width="180px" > 
      </a>
        <form autocomplete="on" id="search"  method="get" action="{% url 'search_products' %}">
          <input id=""search-query" minlength="3" name="search_query" style='height:40px' placeholder="Search"  type="search">
          <a aria-label="submit"  href="{% url 'search_products' %}">
            <svg viewbox="0 0 20 20" style="width: 80px; height:40px; margin-top:-4px; border-radius:10% ">
              <path  d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
              <path d="M0 0h24v24H0z" fill="none" />
            </svg>
          </a>
        </form>
        <div class="div">
          <div class="lang_content">
            <a  class="language" href="">UA</a>
            <span class="slesh">|</span>
            <a  class="language" href="">ENG</a>
          </div>
          <div class="icons">
            <a id="shopping-cart" style="margin-top: 5px;"  href="{% url 'get_cart' %}" title="View shopping cart — 42 items">
              <svg viewbox="13 2 20 20">
                <title>{{cart.total_products}} products</title>
                <fill d="m0,0l24,0l0,24l-24,0l0,-24zm18.31,30l-2.76,5l2.76,-5z" />
                <path id="svg_2" d="m16,4zm-9,14c-1.1,0 -1.99,0.9 -1.99,2s0.89,2 1.99,2s2,-0.9 2,-2s-0.9,-2 -2,-2zm10,0c-1.1,0 -1.99,0.9 -1.99,2s0.89,2 1.99,2s2,-0.9 2,-2s-0.9,-2 -2,-2zm-9.83,-3.25l0.03,-0.12l0.9,-1.63l7.45,0c0.75,0 1.41,-0.41 1.75,-1.03l3.86,-7.01l-1.74,-0.96l-0.01,0l-1.1,2l-2.76,5l-7.02,0l-0.13,-0.27l-2.24,-4.73l-0.95,-2l-0.94,-2l-3.27,0l0,2l2,0l3.6,7.59l-1.35,2.45c-0.16,0.28 -0.25,0.61 -0.25,0.96c0,1.1 0.9,2 2,2l12,0l0,-2l-11.58,0c-0.13,0 -0.25,-0.11 -0.25,-0.25z" />
                <text style="font-size: 8px;" x="9.5" y="9"> {{cart.total_products}}</text>
                <text  x="25" y="15"> cart</text>
              </svg>
            </a> 
            <div class="" style="margin: 15px 0 0 -30px ;">
              {% if request.user.is_authenticated %}
                <a class=dropdown-toggle" href="{% url 'profile' %}">
                  <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                  </svg>
                </a>
              {% else %}
                <a class=dropdown-toggle" href="{% url 'sign_in' %}"  >
                  <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                  </svg>
                </a>
              {% endif %}  
            </div>
          </div>
        </div>  
      </header>
      <section class="section1" style="width: 300px;">
        <!-- input нужен для того, что бы в дальнейшем задать стили иконке ☰ по событию checked, то есть когда меню будем открыать и закрыать -->
        <input type="checkbox" id="hmt" class="hidden-menu-ticker">
        <!-- Далее вёрстка самой иконки. Разделена на спаны, что бы красиво превращать в крестик при открытии (почти как в Телеграме :) -->
        <label class="btn-menu" for="hmt">
        <span class="first"></span>
        <span class="second"></span>
        <span class="third"></span>
        </label>
        <!-- Менюшка раскрывающаяся и скрывающаяся -->

        <ul class="hidden-menu" style="background: #19232c;" >
          <p class="menu_header">Newbee</p>
          <hr style="color: aliceblue;">
          {{user.is_authenticated}}
          {% if not request.user.is_authenticated %}
            <table class="login-table" style="color: aliceblue;">
              <tr style="padding: 10px; background: #19232c;" >
                <td style="background: #19232c;" rowspan="2"><img style="background: #19232c;" src="{% static 'market/store/img/icons/user.png' %}" width="50px" alt=""></td>
                <td style="background: #19232c;">        
                  <a class="side_bar_link" style="background: #19232c; " href="{% url 'sign_in' %}">Sign in</a>
                  |
                  <a class="side_bar_link" style="background: #19232c; " href="{% url 'register' %}">Sign up</a>  
                </td>
              </tr>
              <tr>
                <td style="background: #19232c;">
                  Log in to get more features</td>
              </tr>
            </table>
            <br>
          {% else %} 
            <table class="login-table" style="color: aliceblue;">
              <tr style="padding: 10px; background: #19232c;" >
                <td style="background: #19232c;" rowspan="2"><img style="background: #19232c;" src="{% static 'market/store/img/icons/user.png' %}" width="50px" alt=""></td>
                <td style="background: #19232c;"> 
                  <a class="side_bar_link" style="background: #19232c; " href="{% url 'profile'  %}">Profile</a> |

                  <a class="side_bar_link" style="background: #19232c; " href="{% url 'logout' request.user %}">Log out</a>
                </td>
              </tr>
              
            </table>
            <br>
          {% endif %}  
          
          <li><a class="btn" href="">Card</a></li>
          <li><a class="btn" href="">Help center</a></li>
          <li><a class="btn" href="">+38 068 48 62 861</a></li>
          <hr style="color: aliceblue;">
          <li class="disable-side-li">information about company</li>
          <li><a href="">about us</a></li>
          <li><a href="">Terms of use of the site</a></li>
          <li><a href="">Vacancies</a></li>
          <li><a href="">Contacts</a></li>
          <hr style="color: aliceblue;">

        </ul>
        <!-- А затем уже контент странички. В примере просто зашголовок, что бы было видно, как менюшка нахлёстом выдвигается -->
       
      </section>
      
      <div class="menu-content">
        <div class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark left-sidebar" style="width: 250px; ">
          
          <ul class="nav nav-pills flex-column mb-auto">
            {% block list %}
			      		{% get_categories_list  %}
			    	{% endblock %}
            
          </ul>
          <hr>
          <div class="dropdown">
            <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">
              <strong>mdo</strong>
            </a>
            <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
              <li><a class="dropdown-item" href="#">New project...</a></li>
              <li><a class="dropdown-item" href="#">Settings</a></li>
              <li><a class="dropdown-item" href="#">Profile</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="#">Sign out</a></li>
            </ul>
          </div>
        </div>
        
        <section class="section3 main-container">

          <div class="messages">
            {% if messages %}
              {% for message in messages %}
                {% if message.tags == 'error' %}
                  <div class="alert alert-danger" role="alert">
                    {{message}}
                  </div>
                {% elif message.tags == 'critical' %}
                <div class="alert alert-primary" role="alert">
                  {{message}}
                  </div>
                {% else %}
                  <div class="alert alert-{{message.tags}}" role="alert">
                    {{message}}
                  </div>
                {% endif %}	
              {% endfor %}
            {% endif %}
          </div>

          {% block headers %}
          {% endblock %}

          {% block header_menu_history %}
          {% endblock %}

          {% block order %}
          {% endblock %}

          {% block main-content %}
          {% endblock %}


          {% block paginate %}
					{% if page_obj.has_other_pages %}
						<div class="pagination mb-3" >
							{% if page_obj.has_previous %}
							<a href="?{{q}}page={{  page_obj.previous_page_number}}" class="link_pagin">&laquo;</a>
							{% else %}
							<a  class="disable">&laquo;</a>
							{% endif %} 
							{% if not page_obj.has_previous %}
								<li class=" simple_li">
									<a class="link_pagin link_pagin__active" href="?{{q}}page=1">1</a>
								</li>
							{% else %}
								<li class=" simple_li">
									<a class="link_pagin"  href="?{{q}}page=1">1</a>
								</li>    
							{% endif %}
							{% if page_obj.previous_page_number > 2 %}
									<li class=" simple_li">
										<a class="disable" >...</a>
									</li>
							{% endif %}
							

							{% for p in page_obj.paginator.page_range %}
								{% if p < page_obj.paginator.num_pages  and p > 1 %}
									{% if page_obj.number == p %}
										<li class=" simple_li">
											<a class="link_pagin link_pagin__active"  href="?{{q}}page={{ p }}">{{ p }}</a>
										</li>
									{% elif p >= page_obj.number|add:-2 and p <= page_obj.number|add:2  %}
										<li class=" simple_li">
											<a class="link_pagin" href="?{{q}}page={{ p }}">{{ p }}</a>
										</li>
									
									{% endif %}	
								{% endif %}    	
							{% endfor %}
							{% if page_obj.next_page_number < page_obj.paginator.num_pages|add:-1 %}
								<li class=" simple_li">
									<a class="disable" >...</a>
								</li>
							{% endif %}
							{% if not page_obj.has_next %}
								<li class=" simple_li">
									<a class="link_pagin link_pagin__active" href="?{{q}}page={{ page_obj.paginator.num_pages }}">
										{{page_obj.paginator.num_pages}}</a>
								</li>
							{% else %}
								<li class=" simple_li">
									<a class="link_pagin"  href="?{{q}}page={{ page_obj.paginator.num_pages }}">
										{{page_obj.paginator.num_pages}}</a>
								</li>    
							{% endif %}
							{% if page_obj.has_next %}
								<a href="?{{q}}page={{  page_obj.next_page_number}}" class="link_pagin">&raquo;</a>
							{% else %}
								<a  class="disable">&raquo;</a>
							{% endif %}  
						</div>
					{% endif %}
				{% endblock %}

        </section>
      </div>  
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

   
  </body>
</html>

